!function($){$.extend({lockfixed:function(el,config){config&&config.offset?(config.offset.bottom=parseInt(config.offset.bottom,10),config.offset.top=parseInt(config.offset.top,10)):config.offset={bottom:100,top:0};var el=$(el);if(el&&el.offset()){var el_position=el.css("position"),el_margin_top=parseInt(el.css("marginTop"),10),el_position_top=el.css("top"),el_top=el.offset().top,pos_not_fixed=!1;(config.forcemargin===!0||navigator.userAgent.match(/\bMSIE (4|5|6)\./)||navigator.userAgent.match(/\bOS ([0-9])_/)||navigator.userAgent.match(/\bAndroid ([0-9])\./i))&&(pos_not_fixed=!0),el.wrap("<div class='lf-ghost' style='height:"+el.outerHeight()+"px;display:"+el.css("display")+"'></div>"),$(window).bind("DOMContentLoaded load scroll resize orientationchange lockfixed:pageupdate",el,function(){if(!pos_not_fixed||!document.activeElement||"INPUT"!==document.activeElement.nodeName){var top=0,el_height=el.outerHeight(),el_width=el.parent().innerWidth()-parseInt(el.css("marginLeft"),10)-parseInt(el.css("marginRight"),10),max_height=$(document).height()-config.offset.bottom,scroll_top=$(window).scrollTop();"fixed"===el.css("position")||pos_not_fixed||(el_top=el.offset().top,el_position_top=el.css("top")),scroll_top>=el_top-(el_margin_top?el_margin_top:0)-config.offset.top?(top=max_height<scroll_top+el_height+el_margin_top+config.offset.top?scroll_top+el_height+el_margin_top+config.offset.top-max_height:0,el.css(pos_not_fixed?{marginTop:parseInt(scroll_top-el_top-top,10)+2*config.offset.top+"px"}:{position:"fixed",top:config.offset.top-top+"px",width:el_width+"px"})):el.css({position:el_position,top:el_position_top,width:el_width+"px",marginTop:(el_margin_top&&!pos_not_fixed?el_margin_top:0)+"px"})}})}}})}(jQuery);
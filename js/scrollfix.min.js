"use_strict";var Shira;!function(Shira,$){!function(ScrollFix){ScrollFix.Watcher=function(element,options){this.element=element,this.options=$.extend({},ScrollFix.Watcher.defaults,options)},ScrollFix.Watcher.defaults={fixClass:"scroll-fix",fixTop:0,fixOffset:0,unfixOffset:0,onUpdateFixed:null,syncSize:!0,syncPosition:!0,style:!0},ScrollFix.Watcher.prototype={element:null,substitute:null,options:null,fixed:!1,attached:!1,getElementX:function(elem){var x=0;do x+=elem.offsetLeft;while(elem=elem.offsetParent);return x},getElementY:function(elem){var y=0;do y+=elem.offsetTop;while(elem=elem.offsetParent);return y},fix:function(){this.substitute=$(this.element.cloneNode(!1)).css("visibility","hidden").height($(this.element).height()).insertAfter(this.element)[0],this.options.style&&$(this.element).css("position","fixed").css("top",this.options.fixTop+"px"),$(this.element).addClass(this.options.fixClass)},updateFixed:function(){if(this.options.syncSize&&$(this.element).width($(this.substitute).width()),this.options.syncPosition){var currentScrollLeft=$(window).scrollLeft(),substituteLeftOffset=this.getElementX(this.substitute);$(this.element).css("left",substituteLeftOffset-currentScrollLeft+"px")}null!==this.options.onUpdateFixed&&this.options.onUpdateFixed(this)},unfix:function(){$(this.substitute).remove(),this.substitute=null;var cssReset={};this.options.syncPosition&&(cssReset.left=""),this.options.syncSize&&(cssReset.width=""),this.options.style&&(cssReset.position="",cssReset.top=""),$(this.element).css(cssReset).removeClass(this.options.fixClass)},attach:function(){if(this.attached)throw new Error("Already attached");var that=this;this.updateEventHandler=function(){that.pulse()},$(window).scroll(this.updateEventHandler).resize(this.updateEventHandler),this.attached=!0,this.pulse()},detach:function(){if(!this.attached)throw new Error("Not attached");$(window).unbind("scroll",this.updateEventHandler).unbind("resize",this.updateEventHandler),this.attached=!1},pulse:function(){var currentScroll=$(window).scrollTop();this.fixed?currentScroll<=this.getElementY(this.substitute)+this.options.unfixOffset?(this.unfix(),this.fixed=!1):this.updateFixed():currentScroll>=this.getElementY(this.element)+this.options.fixOffset&&(this.fix(),this.fixed=!0,this.updateFixed())}},$.fn.scrollFix=function(options){var element=this[0];if(element){var watcher=new ScrollFix.Watcher(element,options);return watcher.attach(),watcher}return!1}}(Shira.ScrollFix||(Shira.ScrollFix={}))}(Shira||(Shira={}),jQuery);